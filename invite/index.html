<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>重定向到CMS管理界面...</title>
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <script>
    // 该页面仅用于处理邀请链接，它会自动重定向到管理界面
    // 获取URL中的所有可能的token
    const urlParams = new URLSearchParams(window.location.search);
    
    // 检查各种类型的令牌
    const inviteToken = urlParams.get('invite_token') || 
                        window.location.pathname.split('/invite/')[1];
    const confirmToken = urlParams.get('confirmation_token');
    const recoveryToken = urlParams.get('recovery_token');
    
    console.log('检测到令牌:', {inviteToken, confirmToken, recoveryToken});
    
    // 根据令牌类型重定向
    if (inviteToken) {
      // 邀请令牌 - 用于注册
      console.log('重定向带邀请令牌');
      window.location.href = "/admin/#invite_token=" + inviteToken;
    } else if (confirmToken) {
      // 确认令牌 - 用于邮箱确认
      console.log('重定向带确认令牌');
      window.location.href = "/admin/#confirmation_token=" + confirmToken;
    } else if (recoveryToken) {
      // 恢复令牌 - 用于密码重置
      console.log('重定向带恢复令牌');
      window.location.href = "/admin/#recovery_token=" + recoveryToken;
    } else {
      // 如果没有令牌，直接跳转到管理界面
      window.location.href = "/admin/";
    }
  </script>
</head>
<body>
  <p>正在重定向到内容管理系统...</p>
</body>
</html> 